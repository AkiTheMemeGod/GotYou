;/*FB_PKG_DELIM*/

__d("XDOMScannerResultsControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/shared/user_preferences/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("DOMScanner",["Base64","ConstUriUtils","DOMScannerConfig","FBLogger","JSScheduler","Promise","WebStorage","XDOMScannerResultsControllerRouteBuilder","cometAsyncFetch","isFacebookURI"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=0,l=!1,m=!1;function n(a){return a.startsWith("data:")&&a.includes(";base64,")}function o(a){return n(a)?!1:q(a)}function p(){var a=[],b=document.getElementsByTagName("*");for(var c=0;c<b.length;++c)b[c].shadowRoot!=null&&a.push(b[c]);return a}function q(a){a=d("ConstUriUtils").getUri(a.toString());return a==null?!1:!c("isFacebookURI")(a)}function r(){var a=[],b=p();for(var c=0;c<b.length;c++){var d=b[c],e=d.getBoundingClientRect();e=JSON.stringify({position:{b:e.bottom,l:e.left,r:e.right,t:e.top},size:{h:e.height,w:e.width}},null,2);a.push(["shadow_root",d.tagName,d.id,d.className,e])}return a}function s(){var a=[],b=document.querySelectorAll("script");for(var c=0;c<b.length;++c){var d=b[c];if(d.src&&o(String(d.src))){var e=d.src,f=null,g=null;d.className&&(f=d.className);d.id&&(g=d.id);d=["script",e,g,f,null];a.push(d)}}return a}function t(){var a=[],b=document.getElementsByTagName("iframe");for(var c=0;c<b.length;++c){var d=b[c];if(d.src&&o(d.src)){var e=d.src,f=null,g=null,h=d.getBoundingClientRect();h=JSON.stringify({position:{b:h.bottom,l:h.left,r:h.right,t:h.top},size:{h:d.height,w:d.width},src:d.src,visibility:d.style.visibility},null,2);d.className&&(f=d.className);d.id&&(g=d.id);d=["iframe",e,g,f,h];a.push(d)}}return a}function u(){var a=[],b=(j||(j=c("WebStorage"))).getLocalStorage();if(!b||!b.length)return a;for(var d=0;d<b.length;++d)a.push(b.key(d));return a}function v(){var a=[],b=document.getElementsByTagName("link");for(var c=0;c<b.length;++c){var d=b[c];if(d.href&&o(String(d.href))){var e=d.href;e=["link",e,d.type,d.as,null];a.push(e)}}return a}function w(a,b,d,e){e={event:e?"scan_result":"logged_out_scan_result",local_storage:b,results:a,runtime:k,scan_id:d};c("cometAsyncFetch")(c("XDOMScannerResultsControllerRouteBuilder").buildUri({}).toString(),{data:{data:c("Base64").encodeObject(e)},method:"POST"})["catch"](function(a){c("FBLogger")("domscanner").catching(a).mustfix("Send response failed. %s",a.errorCode,a.errorType)})}function x(a){var e=new Date().valueOf(),f=[],g=[],j=new(i||(i=b("Promise")))(function(a){(h||(h=d("JSScheduler"))).scheduleLoggingPriCallback(function(){try{f=f.concat(s())}catch(a){c("FBLogger")("domscanner").catching(a).mustfix("Check Scripts failed")}a()})}),l=new i(function(a){(h||(h=d("JSScheduler"))).scheduleLoggingPriCallback(function(){try{g=g.concat(u())}catch(a){c("FBLogger")("domscanner").catching(a).mustfix("Check local storage failed")}a()})}),m=new i(function(a){(h||(h=d("JSScheduler"))).scheduleLoggingPriCallback(function(){try{f=f.concat(v())}catch(a){c("FBLogger")("domscanner").catching(a).mustfix("Check link tags failed")}a()})}),n=new i(function(a){(h||(h=d("JSScheduler"))).scheduleLoggingPriCallback(function(){try{f=f.concat(r())}catch(a){c("FBLogger")("domscanner").catching(a).mustfix("Check shadow roots failed")}a()})}),o=new i(function(a){(h||(h=d("JSScheduler"))).scheduleLoggingPriCallback(function(){try{f=f.concat(t())}catch(a){c("FBLogger")("domscanner").catching(a).mustfix("Check iframes failed")}a()})});i.all([j,l,m,n,o])["finally"](function(){k=new Date().valueOf()-e,(h||(h=d("JSScheduler"))).scheduleLoggingPriCallback(function(){return w(f,g,a,!0)})})}function a(){!l&&c("DOMScannerConfig").needs_scan&&(l=!0,window.setTimeout(function(){return(h||(h=d("JSScheduler"))).scheduleLoggingPriCallback(function(){return x(c("DOMScannerConfig").scan_id)})},c("DOMScannerConfig").delay))}function e(){if(!m&&c("DOMScannerConfig").needs_scan){m=!0;var a=new Date().valueOf(),b=[],d=[];try{b=s(),d=u()}catch(a){c("FBLogger")("domscanner_loginpage").catching(a).mustfix("Scanning failed on login page %s",a.errorCode,a.errorType)}k=new Date().valueOf()-a;w(b,d,c("DOMScannerConfig").scan_id,!1)}}f={checkIframes:t,checkLinkTags:v,checkScripts:s,checkShadowRoots:r};g.scheduleScan=a;g.scanLoginPage=e;g.exportedForTesting=f}),98);
__d("tidyEvent",["Run"],(function(a,b,c,d,e,f,g){var h=[];function i(){while(h.length){var a=h.shift();a.remove?a.remove():a.unsubscribe&&a.unsubscribe()}}function j(a){var b,c=a;function d(){if(!b)return;b.apply(c,arguments);b=null;c=null}if(c&&c.remove)b=c.remove,c.remove=d;else{b=(a=c)==null?void 0:a.unsubscribe;c.unsubscribe=d}return c}function a(a){h.length||d("Run").onLeave(i);if(Array.isArray(a))for(var b=0;b<a.length;b++)a[b]&&h.push(j(a[b]));else a&&h.push(j(a));return a}g["default"]=a}),98);
__d("DeviceBasedLoginForm",["Event","tidyEvent"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){c("tidyEvent")(c("Event").listen(a,"click",function(a){a.preventDefault(),b.submit()}))}g.init=a}),98);
__d("DeviceBasedLoginUserLoginDialog",["BDClientSignalCollectionTrigger","BDSignalCollectionData","Base64","Button","DOM","Event","FBBrowserPasswordEncryption","LoginServicePasswordEncryptDecryptEventTypedLogger","cx","ge","promiseDone","tidyEvent"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d){var e=c("ge")("email"),f=c("ge")("pass");c("tidyEvent")(c("Event").listen(b,"click",function(){a.hide()}));d&&a.subscribe("aftershow",function(){d&&d.focus()});a.subscribe("show",function(){e.disabled=!0,f.disabled=!0});a.subscribe("hide",function(){e.disabled=!1,f.disabled=!1})}function d(a){var d=a.dialog,e=a.loginForm,f=a.pubKey;e.shared_prefs_data&&a.sharedPrefs===!0&&void c("BDClientSignalCollectionTrigger").startLoginTimeSignalCollection(c("BDSignalCollectionData"));b("cx");var g=e.getElementsByClassName("_31ni")[0],h=Math.floor(Date.now()/1e3).toString();c("tidyEvent")(c("Event").listen(g,"click",function(){var g=c("DOM").scry(e,"button");a.sharedPrefs&&e.shared_prefs_data&&(e.shared_prefs_data.value=c("Base64").encode(c("BDClientSignalCollectionTrigger").getSignalsAsJSONString()));g.forEach(function(a){c("Button").setEnabled(a,!1)});d.subscribe("beforehide",function(){return!1});if((window.crypto||window.msCrypto)&&f){g=b("FBBrowserPasswordEncryption");var i=b("promiseDone");i(g.encryptPassword(f.keyId,f.publicKey,e.pass.value,h),function(a){a=c("DOM").create("input",{type:"hidden",name:"encpass",value:a});e.appendChild(a);e.pass.disabled=!0;e.submit()},function(a){var c="#PWD_BROWSER",d=5,f=b("LoginServicePasswordEncryptDecryptEventTypedLogger");new f().setError("BrowserEncryptionFailureAccountSwitcherLogin").setErrorMessage(a.message).setGrowthFlow("www_account_switcher").setPasswordTag(c).setPasswordEncryptionVersion(d).setPasswordTimestamp(h).logVital();e.submit()})}else e.submit()}))}function e(a){var d=a.dialog,e=a.loginForm,f=a.pubKey;e.shared_prefs_data&&a.sharedPrefs===!0&&void c("BDClientSignalCollectionTrigger").startLoginTimeSignalCollection(c("BDSignalCollectionData"));b("cx");var g=e.getElementsByClassName("_31ni")[0],h=Math.floor(Date.now()/1e3).toString();c("tidyEvent")(c("Event").listen(g,"click",function(){var g=c("DOM").scry(e,"button");g.forEach(function(a){c("Button").setEnabled(a,!1)});d.subscribe("beforehide",function(){return!1});a.sharedPrefs&&e.shared_prefs_data&&e.shared_prefs_data.value&&(e.shared_prefs_data.value=c("Base64").encode(c("BDClientSignalCollectionTrigger").getSignalsAsJSONString()));if((window.crypto||window.msCrypto)&&f){g=b("FBBrowserPasswordEncryption");var i=b("promiseDone");i(g.encryptPassword(f.keyId,f.publicKey,e.pass.value,h),function(a){a=c("DOM").create("input",{type:"hidden",name:"encpass",value:a});e.appendChild(a);e.pass.disabled=!0;e.submit()},function(a){var c="#PWD_BROWSER",d=5,f=b("LoginServicePasswordEncryptDecryptEventTypedLogger");new f().setError("BrowserEncryptionFailureAccountSwitcherLogin").setErrorMessage(a.message).setGrowthFlow("www_account_switcher").setPasswordTag(c).setPasswordEncryptionVersion(d).setPasswordTimestamp(h).logVital();e.submit()})}else e.submit()}))}function f(a,b){c("tidyEvent")(c("Event").listen(a,"click",function(d){var e=c("DOM").find(b,"input"),f=a.form;d.preventDefault();e.checked=!0;f&&(c("Event").fire(f,"submit"),f.submit())}))}g.init=a;g.handleFormSubmit=d;g.setupDisablingButtonsOnSubmit=e;g.initSavePasswordButton=f}),98);
__d("LoginDeviceBasedTypedLogger",["Banzai","GeneratedLoggerUtils"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:LoginDeviceBasedLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:LoginDeviceBasedLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:LoginDeviceBasedLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAccountType=function(a){this.$1.account_type=a;return this};c.setClientUpdateTime=function(a){this.$1.client_update_time=a;return this};c.setDeviceID=function(a){this.$1.device_id=a;return this};c.setError=function(a){this.$1.error=a;return this};c.setErrorClass=function(a){this.$1.error_class=a;return this};c.setErrorCode=function(a){this.$1.error_code=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setEventSubtype=function(a){this.$1.event_subtype=a;return this};c.setFlow=function(a){this.$1.flow=a;return this};c.setNoncePresent=function(a){this.$1.nonce_present=a;return this};c.setNumAccounts=function(a){this.$1.num_accounts=a;return this};c.setNuxSource=function(a){this.$1.nux_source=a;return this};c.setPinPresent=function(a){this.$1.pin_present=a;return this};c.setPotentialAccountID=function(a){this.$1.potential_account_id=a;return this};c.setPotentialAccountIds=function(a){this.$1.potential_account_ids=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setRememberThisDevice=function(a){this.$1.remember_this_device=a;return this};c.setShowNux=function(a){this.$1.show_nux=a;return this};c.setSnaptuClientID=function(a){this.$1.snaptu_client_id=a;return this};c.setSpiShownCount=function(a){this.$1.spi_shown_count=a;return this};return a}();c={account_type:!0,client_update_time:!0,device_id:!0,error:!0,error_class:!0,error_code:!0,event:!0,event_subtype:!0,flow:!0,nonce_present:!0,num_accounts:!0,nux_source:!0,pin_present:!0,potential_account_id:!0,potential_account_ids:!0,remember_this_device:!0,show_nux:!0,snaptu_client_id:!0,spi_shown_count:!0};f["default"]=a}),66);
__d("DeviceLoginUserAnimation",["Arbiter","Event","LoginDeviceBasedTypedLogger","tidyEvent"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d,e){c("tidyEvent")(c("Event").listen(b,"click",function(b){b.preventDefault();d&&c("Arbiter").inform("account_switcher/user_clicked");b=a.getAttribute("data-userid");var f=[];f.push(parseInt(b,10));new(c("LoginDeviceBasedTypedLogger"))().setEvent("show_input_password").setAccountType("identifier_saved").setPotentialAccountID(parseInt(b,10)).log();e&&e.show()}))}g.init=a}),98);